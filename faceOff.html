<!--V2 - Added extra functions: Let user pick difficulty, track number of rounds, let user restart game-->
<!--V3 - Make difficulty select a 3 button choice-->
<!--V4 - make game over only on click on wrong face instead of anywhere but correct face-->
<!--V5 - Add random Face generation using an array-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Face Off!</title>
    <style>
        img {
            position: absolute;
            width: 75px;
        }

        div {
            position: absolute;
            width: 500px;
            height: 500px;
        }

        #rightSide {
            left: 500px;
            border-left: 1px solid;
        }

        .divButton {
            width: 75px;
            height: 25px;
            border: 1px solid black;
            margin: 10px;
            padding-top: 5px;
            text-align: center;
            position: relative;
            left: 50px;
        }

        #buttonBody {
            width: 200px;
            height: 175px;
            border: 1px solid black;
            margin: 10px;
            text-align: center;
            left: 36%;
            background: aquamarine;
        }
    </style>
</head>
<body>
<h1>Face Off!</h1>
<p>Click on the extra face on the left.</p>

<div id="leftSide"></div>
<div id="rightSide"></div>

<div id="buttonBody"> <!--To make this button work, it has to come AFTER the leftSide and rightSide divs (alternatively, the z-index of the button body can be set and then it can be placed in any order)-->
    Choose your difficulty level:
    <div id="easy" class="divButton">
        Easy
    </div>
    <div id="medium" class="divButton">
        Medium
    </div>
    <div id="hard" class="divButton">
        Hard
    </div>
</div>

<script>
    //make noise on click on face
    //add score board & timer
    //style

    const faceArray = ['images/face1.png', 'images/face2.png', 'images/face3.png', 'images/face4.png'];
    const theLeftSide = document.querySelector('#leftSide');
    const theRightSide = document.querySelector('#rightSide');
    let attempts = 0;
    let facesIncrement = 0;
    let numberOfFaces = 0;

    let button = document.querySelector('#buttonBody');
    let easy = document.querySelector('#easy');
    let medium = document.querySelector('#medium');
    let hard = document.querySelector('#hard');
    
    easy.addEventListener('click', setEasy);
    medium.addEventListener('click', setMedium);
    hard.addEventListener('click', setHard);

    function displayButton () {
        button.hidden = false;
    }

    function setEasy() {
        facesIncrement = 2; 
        console.log('easy');
        button.hidden = true;
        generateFaces();
    }

    function setMedium() {
        facesIncrement = 5; 
        console.log('medium');
        button.hidden = true;
        generateFaces();
    }

    function setHard() {
        facesIncrement = 8; 
        console.log('hard');
        button.hidden = true;
        generateFaces();
    } 

    function generateFaces() {
        numberOfFaces += facesIncrement;
        for (i = 0; i < numberOfFaces; i++) {
            let face = document.createElement('img');
            face.src = faceArray[Math.floor(Math.random() * 4)]; //make an array of the 4 face locations and make face.src a random math to pick one of the 4 array elements?

            const randomTop = Math.floor(Math.random() * 400) + 1;
            const randomLeft = Math.floor(Math.random() * 400) + 1;
            face.style.top = randomTop + 'px';
            face.style.left = randomLeft + 'px';
            theLeftSide.appendChild(face);

        }

        const leftSideImages = theLeftSide.cloneNode(true);
        leftSideImages.removeChild(leftSideImages.lastChild);
        theRightSide.appendChild(leftSideImages);

        const leftSideNodes = theLeftSide.childNodes; //adds game over to all faces on the left side
        for (node of leftSideNodes) {
            node.addEventListener('click', gameOver);
        }

        theLeftSide.lastChild.removeEventListener('click', gameOver); //removes gameOver from the last face on the left side
        theLeftSide.lastChild.addEventListener('click', nextLevel); //adds nextLevel to the last face on the left side
       

    }

    function removeFaces() {
        while(theLeftSide.firstChild) {
            theLeftSide.removeChild(theLeftSide.firstChild);
        }

        while(theRightSide.firstChild) {
            theRightSide.removeChild(theRightSide.firstChild);
        }        
    }

    function nextLevel() {
        removeFaces();
        
        console.log(numberOfFaces);
        attempts ++;
        alert('Congratulations!\n\nYou completed ' + attempts + ' rounds!'); //need to fix case of 1 round (you completed 1 round instead of 1 rounds)
        generateFaces();
    }

    function gameOver() {
        alert('Game over!\n\nYou completed ' + attempts + ' rounds!');
        theLeftSide.lastChild.removeEventListener('click', nextLevel);
        document.body.removeEventListener('click', gameOver);
        let restartChoice = confirm('Restart game?'); //make button have a hidden attribute until activated?
        if (restartChoice === true) {
            removeFaces();
        numberOfFaces = 0;
        attempts = 0;
        displayButton();
        }else{
            alert('QUITTER!');
        }
    }


</script>
</body>
</html>
